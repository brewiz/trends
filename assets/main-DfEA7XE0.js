import{c as e,t,a as r,d as a,u as s,b as n,i,P as o,e as l,s as c,M as d,C as h,f as u,T as m,g,h as p,j as f,r as b}from"./components-C3lUiEKW.js";import{a as v,e as x,d as y,l as w,k,b as S,F as C,o as M,n as L,f as $}from"./vendor-Bc0VH6q0.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const r of e)if("childList"===r.type)for(const e of r.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();class P{constructor(){this.baseUrl="https://formulae.brew.sh/api"}async fetchAllFormulaMetadata(){try{const e=await fetch(`${this.baseUrl}/formula.json`);if(!e.ok)return new Map;const t=await e.json();return new Map(t.map((e=>{let t={token:e.name,tap:e.tap||"homebrew/core",type:"formula"},r={key:t,name:e.name,names:[e.name],version:e.versions?.stable||null,desc:e.desc||"No description provided...",homepage:e.homepage||null,tap:t.tap,brewUrl:this.generateBrewUrl(t)};return e.name!==e.full_name&&(r.full_name=e.full_name),e.disabled&&(r.disable={},e.disable_date&&(r.disable.date=e.disable_date),e.disable_reason&&(r.disable.reason=e.disable_reason),e.disable_replacement&&(r.disable.replacement=e.disable_replacement)),e.deprecated&&(r.deprecate={},e.deprecation_date&&(r.deprecate.date=e.deprecation_date),e.deprecation_reason&&(r.deprecate.reason=e.deprecation_reason),e.deprecation_replacement&&(r.deprecate.replacement=e.deprecation_replacement)),[`${t.type.slice(0,1).toUpperCase()}:${t.tap}:${t.token}`,r]})))}catch(e){return new Map}}async fetchAllCaskMetadata(){try{const e=await fetch(`${this.baseUrl}/cask.json`);if(!e.ok)return new Map;const t=await e.json();return new Map(t.map((e=>{let t={token:e.token,tap:e.tap||"homebrew/cask",type:"cask"},r={key:t,name:e.name[0],names:e.name,token:e.token,version:e.version||null,desc:e.desc||"No description provided...",homepage:e.homepage||null,tap:t.tap,brewUrl:this.generateBrewUrl(t)};return[`${t.type.slice(0,1).toUpperCase()}:${t.tap}:${t.token}`,r]})))}catch(e){return new Map}}async fetchAnalyticsData(e,t="install-on-request"){try{const r=await fetch(`${this.baseUrl}/analytics/${t}/${e}.json`);if(!r.ok)throw new Error(`Failed to fetch analytics data for ${t}/${e}`);return await r.json()}catch(r){throw r}}generateBrewUrl(e){if("homebrew/core"===e.tap||"homebrew/cask"===e.tap)return`https://formulae.brew.sh/${e.type}/${e.token}`;const[t,r]=e.tap.split("/");return`https://formulae.brew.sh/${e.type}/${t}/${r}/${e.token}`}}class D{constructor(){this.repository=new P}calculateTrend(e,t,r){const a=e/30/((r-e)/335)*100-100;return Math.round(10*a)/10}async fetchAllData(e=!0,t=!0){try{const r={30:"30d",90:"90d",365:"365d"},a=[];e?(a.push(this.repository.fetchAllFormulaMetadata()),Object.values(r).forEach((e=>{a.push(this.repository.fetchAnalyticsData(e,"install-on-request"))}))):(a.push(Promise.resolve(new Map)),Object.values(r).forEach((()=>{a.push(Promise.resolve({items:[]}))}))),t?(a.push(this.repository.fetchAllCaskMetadata()),Object.values(r).forEach((e=>{a.push(this.repository.fetchAnalyticsData(e,"cask-install"))}))):(a.push(Promise.resolve(new Map)),Object.values(r).forEach((()=>{a.push(Promise.resolve({items:[]}))})));const s=await Promise.all(a),n=s[0],i={30:s[1],90:s[2],365:s[3]},o=s[4],l={30:s[5],90:s[6],365:s[7]},c=e?this.processFormulaData(n,i):[],d=t?this.processCaskData(o,l):[],h=c.filter((e=>e.count[30]>=(I.thresholds?.[30]?.formula||0)&&e.count[90]>=(I.thresholds?.[90]?.formula||0)&&e.count[365]>=(I.thresholds?.[365]?.formula||0))),u=d.filter((e=>e.count[30]>=(I.thresholds?.[30]?.cask||0)&&e.count[90]>=(I.thresholds?.[90]?.cask||0)&&e.count[365]>=(I.thresholds?.[365]?.cask||0))),m=[...h,...u];return{summary:Object.fromEntries([30,90,365].map((e=>[e,{date:{start:i[e]?.start_date||l[e]?.start_date||"",end:i[e]?.end_date||l[e]?.end_date||""},formula:{items:i[e]?.total_items||0,count:i[e]?.total_count||0},cask:{items:l[e]?.total_items||0,count:l[e]?.total_count||0}}]))),items:m}}catch(r){throw r}}ensureCountConsistency(e,t,r){return e=Math.max(0,e),t=Math.max(0,t),r=Math.max(0,r),{count365:e,count90:t=Math.min(t,e),count30:r=Math.min(r,t)}}processData(e,t,r){const a=new Map(t[90].items.map((e=>[e[r],e]))),s=new Map(t[30].items.map((e=>[e[r],e])));return t[365].items.map((t=>{const n=e.get(t[r])||{},i=parseInt(t.count.replace(/,/g,"")),o=a.get(t[r]),l=parseInt(o?.count.replace(/,/g,"")||"0"),c=s.get(t[r]),d=parseInt(c?.count.replace(/,/g,"")||"0"),{count365:h,count90:u,count30:m}=this.ensureCountConsistency(i,l,d),g=function(e,t,r){const a=e/30,s=(r-t)/275;let n=100;r>=1.2*t&&(n+=10-10*s/a);const i=12*a+(t-e)/60*5+s,o=Math.log2(i)*n;return Math.round(o)}(m,u,h),p=this.calculateTrend(m,u,h);let f=t[r].split("/"),b={token:f.pop(),tap:f.length>1?f.join("/"):"cask"===r?"homebrew/cask"+f.join("-"):"homebrew/core"+f.join("-"),type:r};return{key:b,name:b.token,names:[b.token],count:{365:h,90:u,30:m},score:g,trend:p,version:n.version||null,desc:n.desc||"Metadata not available...",homepage:n.homepage||null,tap:b.tap,brewUrl:this.repository.generateBrewUrl(b)}}))}processFormulaData(e,t){return this.processData(e,t,"formula")}processCaskData(e,t){return this.processData(e,t,"cask")}}const j=new class{constructor(){this.stateManager=new D,[this.store,this.setStore]=e({period:30,search:"",isLoading:!1,error:null,thresholds:{30:{formula:50,cask:20},90:{formula:125,cask:50},365:{formula:250,cask:100}},summary:{30:{date:{start:"",end:""},formula:{items:0,count:0},cask:{items:0,count:0}},90:{date:{start:"",end:""},formula:{items:0,count:0},cask:{items:0,count:0}},365:{date:{start:"",end:""},formula:{items:0,count:0},cask:{items:0,count:0}}},items:[],selectedPackage:null,packagesById:new Map,formulaData:new Map,caskData:new Map})}async initialize(){this.setStore("isLoading",!0);try{const e=new P,t=await e.fetchAllFormulaMetadata(),r=await e.fetchAllCaskMetadata();this.setStore("formulaData",t),this.setStore("caskData",r);const a=await this.stateManager.fetchAllData(!0,!0);this.setStore("summary",a.summary);const s=new Map,n=a.items.map((e=>{e.id||(e.id=`${e.key.type.slice(0,1).toUpperCase()}:${e.key.tap}:${e.key.token}`);const a="cask"===e.key.type?r.get(e.id):t.get(e.id),n={...e,...a||{}};return s.set(n.id,n),n}));return this.setStore("items",n),this.setStore("packagesById",s),n}catch(e){return this.setStore("error",e?.message||"Failed to load data"),[]}finally{this.setStore("isLoading",!1)}}async setSelectedPackage(e){if(!e)return void this.setStore("selectedPackage",null);const t="cask"===e.key.type?this.store.caskData.get(e.id):this.store.formulaData.get(e.id),r={...e,...t||{}};this.setStore("selectedPackage",r),r.id&&(this.setStore("packagesById",(e=>(e.set(r.id,r),e))),this.setStore("items",(e=>e.map((e=>e.id===r.id?r:e)))))}getPackageById(e){return this.store.packagesById.get(e)||null}exportStoreData(){const e=Array.from(this.store.packagesById.values()),t=Array.from(this.store.formulaData.entries()).map((([e,t])=>({id:e,...t}))),r=Array.from(this.store.caskData.entries()).map((([e,t])=>({id:e,...t})));return{period:this.store.period,thresholds:this.store.thresholds,summary:this.store.summary,items:this.store.items,packages:e,formulaData:t,caskData:r,exportDate:(new Date).toISOString()}}},I=j.store;j.setStore;class W{static compareItems(e,t,r){switch(r){case"trend":return t.trend-e.trend;case"score":return t.score-e.score;case"installs":return t.displayCount-e.displayCount;default:return 0}}static sortItems(e,t){return e&&t?.field?[...e].sort(((e,r)=>this.compareItems(e,r,t.field))):e}}class q{constructor(){this.stateManager=new D}static processSearchTerms(e,t){if(!e)return[];const r=e.split(" ").filter((e=>e.length>0));return t?r:r.map((e=>e.toLowerCase()))}static packageMatchesSearch(e,t,r,a,s){if(!t.length)return!0;const n=Array.isArray(e.name)?e.name[0]||"":e.name||"",i=a?n:n.toLowerCase(),o=a?e.desc||"":(e.desc||"").toLowerCase();return t.every((e=>{const t=(e,t)=>new RegExp(`\\b${t}\\b`,a?"":"i").test(e);return"name"===r?s?t(i,e):i.includes(e):"description"===r?s?t(o,e):o.includes(e):s?t(i,e)||t(o,e):i.includes(e)||o.includes(e)}))}static filterItems(e,t,r,a,s,n,i,o="installs"){if(!e||0===e.length)return[];const l=e=>i?.[n]?.[e.key.type]?.total_count||0,c=this.processSearchTerms(t,a);return e.filter((e=>this.packageMatchesSearch(e,c,r,a,s))).map((e=>({...e,displayCount:e.count[n]||0,percent:q.calculatePercent(e.count[n],l(e)),sortedIndex:e.sortedIndex||void 0}))).sort(((e,t)=>W.compareItems(e,t,o)))}static calculatePercent(e,t){return t&&e?(e/t*100).toFixed(2):"0.00"}}var A=t("<img src=https://upload.wikimedia.org/wikipedia/commons/9/95/Homebrew_logo.svg alt=Homebrew>");function _(e){return t=A(),v((()=>r(t,`w-12 h-12 ${e.class||""}`))),t;var t}var U=t('<button class="relative p-2 text-gray-200 hover:text-white rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500"aria-label="Shopping cart"title="View installation cart"><svg xmlns=http://www.w3.org/2000/svg class="w-6 h-6"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">'),E=t('<span class="absolute -top-1 -right-1 flex items-center justify-center w-5 h-5 bg-red-500 text-white text-xs font-bold rounded-full">');function O(){const{cart:e,toggleCartVisibility:t}=s();return(a=U()).firstChild,n(a,"click",t),i(a,(r=x((()=>e?.items?.length>0)),()=>{return r()&&(t=E(),i(t,(()=>e.items.length)),t);var t}),null),a;var r,a}a(["click"]);var T=t("<div>"),B=t('<div class="fixed bg-gray-800 text-white p-4 rounded-lg shadow-xl w-[480px] z-[100] border border-gray-700"><div class="absolute -top-2 right-10 transform w-4 h-4 rotate-45 bg-gray-800 border-t border-l border-gray-700">');function F(e){const[t,a]=y(!1),[s,n]=y({top:0,left:0});let c;const d=e=>{const t=c.getBoundingClientRect();n({top:t.bottom+window.scrollY+10,left:t.right+window.scrollX-450}),a(!0)},h=()=>{a(!1)};return[(()=>{var t=T();t.addEventListener("mouseleave",h),t.addEventListener("mouseenter",d);return"function"==typeof c?l(c,t):c=t,i(t,(()=>e.trigger)),v((()=>r(t,e.triggerClass||""))),t})(),w(o,{get children(){return x((()=>!!t()))()&&(r=B(),a=r.firstChild,i(r,(()=>e.content),a),v((e=>{var t=`${s().top}px`,a=`${s().left}px`;return t!==e.e&&(null!=(e.e=t)?r.style.setProperty("top",t):r.style.removeProperty("top")),a!==e.t&&(null!=(e.t=a)?r.style.setProperty("left",a):r.style.removeProperty("left")),e}),{e:void 0,t:void 0}),r);var r,a}})]}var Q=t('<svg xmlns=http://www.w3.org/2000/svg viewBox="0 0 24 24"fill=none stroke=currentColor strokeWidth=2 strokeLinecap=round strokeLinejoin=round><polyline points="23 6 13.5 15.5 8.5 10.5 1 18"></polyline><polyline points="17 6 23 6 23 12">');function H(e){return t=Q(),v((()=>c(t,"class",e.class||""))),t;var t}var N=t('<button title="Download Homebrew data as JSON"class="flex items-center px-3 py-1 bg-amber-600 hover:bg-amber-700 rounded text-white transition-colors"><svg fill=none stroke=currentColor viewBox="0 0 24 24"></svg><span>'),R=t('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></svg>',!1,!0,!1),z=t('<svg><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></svg>',!1,!0,!1);function V(){const[e,t]=y(!1),r=async()=>{if(!e())try{t(!0);const e=j.exportStoreData();if(!e)throw new Error("No data available for export");{const t=function(e,t="brew-trend-export",r=!0){try{const a=r?JSON.stringify(e,null,2):JSON.stringify(e),s=new Blob([a],{type:"application/json"}),n=URL.createObjectURL(s),i=document.createElement("a");i.href=n;const o=(new Date).toISOString().replace(/[-:.]/g,"").substring(0,14);return i.download=`${t}-${o}.json`,document.body.appendChild(i),i.click(),setTimeout((()=>{document.body.removeChild(i),URL.revokeObjectURL(n)}),100),!0}catch(a){return!1}}(e,"homebrew-data");if(!t)throw new Error("Failed to download data")}}catch(r){alert("Failed to download data. Please try again.")}finally{t(!1)}};return s=N(),n=s.firstChild,o=n.nextSibling,s.$$click=r,i(n,(a=x((()=>!!e())),()=>a()?R():z())),i(o,(()=>e()?"Downloading...":"Download Data")),v((t=>{var r=e(),a="w-5 h-5 mr-1 "+(e()?"animate-spin":"");return r!==t.e&&(s.disabled=t.e=r),a!==t.t&&c(n,"class",t.t=a),t}),{e:void 0,t:void 0}),s;var a,s,n,o}a(["click"]);var J=t('<header class="sticky top-0 z-10 bg-[#333333] text-white shadow-md"><div class="container mx-auto py-4 px-4"><div class="app-header flex items-center justify-between space-x-4"><div class="flex items-center shrink-0"><span class=mr-3></span><span class="text-3xl font-bold text-amber-50">Homebrew Trend Shop</span></div><div class="flex items-center gap-4 text-sm "></div><div class="flex items-center gap-2">'),Y=t('<div class="flex items-end"><div class="flex flex-col"><div>Period: </div><div>Formulae: <!> (<!>) · Casks: <!> (<!>)</div></div><div class="cursor-pointer shrink-0 ml-3"title="View detailed analytics and installation trends over time">'),G=t('<div class=space-y-4><div class="flex items-center border-b border-gray-700 pb-3"><span class="cursor-pointer shrink-0 mr-3"title="View detailed analytics and installation trends over time"></span><div class="font-semibold text-lg text-amber-400">Homebrew Analytics Summary</div></div><div class=space-y-3><div class="flex items-center"><svg class="w-4 h-4 text-amber-500 mr-2"fill=none stroke=currentColor viewBox="0 0 24 24"><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"></path></svg><div class=font-medium>Data Period</div></div><div class="ml-6 bg-gray-700 rounded p-2 text-gray-200"></div></div><div class="grid grid-cols-2 gap-3"><div class=space-y-2><div class="flex items-center"><div class=font-medium>Formulae</div></div><div class="ml-6 flex justify-between"><span class=text-gray-300>Total:</span><span class="font-semibold text-white"></span></div><div class="ml-6 flex justify-between"><span class=text-gray-300>counts:</span><span class="font-semibold text-amber-400"></span></div></div><div class=space-y-2><div class="flex items-center"><div class=font-medium>Casks</div></div><div class="ml-6 flex justify-between"><span class=text-gray-300>Total:</span><span class="font-semibold text-white"></span></div><div class="ml-6 flex justify-between"><span class=text-gray-300>counts:</span><span class="font-semibold text-amber-400"></span></div></div></div><div class="text-xs text-gray-400 italic mt-2 pt-2 border-t border-gray-700">Displaying data for the selected period: ');function K(e){const{store:t,period:r,formatTimePeriod:a}=e;return n=J(),o=n.firstChild.firstChild.firstChild,l=o.firstChild,c=o.nextSibling,u=c.nextSibling,i(l,w(_,{class:"w-10 h-10 text-amber-500"})),i(c,(s=x((()=>!(t.isLoading||!t.summary))),()=>s()&&w(F,{triggerClass:"text-stone-300 whitespace-nowrap cursor-help",get trigger(){return(()=>{var e=Y(),s=e.firstChild,n=s.firstChild;n.firstChild;var o=n.nextSibling,l=o.firstChild.nextSibling,c=l.nextSibling.nextSibling,d=c.nextSibling.nextSibling,h=d.nextSibling.nextSibling;h.nextSibling;var u=s.nextSibling;return i(n,a,null),i(o,(()=>t.summary[r()].formula.items.toLocaleString()),l),i(o,(()=>t.summary[r()].formula.count.toLocaleString()),c),i(o,(()=>t.summary[r()].cask.items.toLocaleString()),d),i(o,(()=>t.summary[r()].cask.count.toLocaleString()),h),i(u,w(H,{class:"w-7 h-7 text-amber-500 hover:text-amber-400"})),e})()},get content(){return s=G(),n=s.firstChild,o=n.firstChild,l=n.nextSibling,c=l.firstChild.nextSibling,u=l.nextSibling,m=u.firstChild,g=m.firstChild,p=g.firstChild,f=g.nextSibling,b=f.firstChild.nextSibling,v=f.nextSibling.firstChild.nextSibling,y=m.nextSibling.firstChild,k=y.firstChild,S=y.nextSibling,C=S.firstChild.nextSibling,M=S.nextSibling.firstChild.nextSibling,(L=u.nextSibling).firstChild,i(o,w(H,{class:"w-7 h-7 text-amber-500 hover:text-amber-400"})),i(c,a),i(g,w(d,{class:"w-5 h-5 text-amber-500 mr-2"}),p),i(b,(()=>t.summary[r()].formula.items.toLocaleString())),i(v,(()=>t.summary[r()].formula.count.toLocaleString())),i(y,w(h,{class:"w-5 h-5 text-amber-500 mr-2"}),k),i(C,(()=>t.summary[r()].cask.items.toLocaleString())),i(M,(()=>t.summary[r()].cask.count.toLocaleString())),i(L,(e=x((()=>30===r())),()=>e()?"30 days":x((()=>90===r()))()?"90 days":365===r()?"365 days":"error"),null),s;var e,s,n,o,l,c,u,m,g,p,f,b,v,y,k,S,C,M,L}}))),i(u,w(V,{}),null),i(u,w(O,{}),null),n;var s,n,o,l,c,u}function X(){const e=new URLSearchParams(window.location.search),t={};t.q=e.get("q")||"";const r=e.get("mode");return t.mode="all"===r||"name"===r||"description"===r?r:"all",t.case="true"===e.get("case"),t.word="true"===e.get("word"),t}function Z(e){const t=new URLSearchParams,r=new URLSearchParams(window.location.search);void 0!==e.q?e.q&&t.set("q",e.q):r.has("q")&&t.set("q",r.get("q")),void 0!==e.mode?e.mode&&"all"!==e.mode&&t.set("mode",e.mode):r.has("mode")&&"all"!==r.get("mode")&&t.set("mode",r.get("mode")),void 0!==e.case?e.case&&t.set("case","true"):r.has("case")&&"true"===r.get("case")&&t.set("case","true"),void 0!==e.word?e.word&&t.set("word","true"):r.has("word")&&"true"===r.get("word")&&t.set("word","true");const a=t.toString()?`${window.location.pathname}?${t.toString()}`:window.location.pathname;window.history.pushState(null,"",a)}var ee=t('<div class="relative w-full md:w-2/3 search-container"><div class="relative flex items-center"><input type=text class="search-input w-full pr-8"aria-label="Search packages"></div><div class="search-options mt-2 flex flex-wrap gap-x-4 gap-y-2 text-sm"><div class="search-mode flex space-x-2"><label class="flex items-center"title="Search in names and descriptions"><input type=radio name=searchMode value=all><span class=ml-1>🔍 All</span></label><label class="flex items-center"title="Search in package names only"><input type=radio name=searchMode value=name><span class=ml-1>📦 Name</span></label><label class="flex items-center"title="Search in descriptions only"><input type=radio name=searchMode value=description><span class=ml-1>📄 Desc</span></label></div><div class="search-options flex space-x-3 items-center"><label class="flex items-center"title="Match case (Aa ≠ aa)"><input type=checkbox><span class=ml-1>Aa</span></label><label class="flex items-center"title="Match whole words only"><input type=checkbox><span class=ml-1>[w]</span></label><button title="Reset search options"aria-label="Reset search options">✕'),te=t('<button class="absolute right-2 flex items-center justify-center h-6 w-6 rounded-full bg-gray-200 hover:bg-gray-300 text-gray-600 transition-colors"aria-label="Clear search"title="Clear search"><span class="text-sm font-bold">✕');function re(e){const[t,a]=y("");k((()=>{const t=X();t.q&&(a(t.q),e.onSearchChange(t.q)),t.mode&&["all","name","description"].includes(t.mode)?e.onSearchModeChange(t.mode):e.onSearchModeChange("all"),t.case&&e.onCaseSensitiveChange(t.case),t.word&&e.onWholeWordChange(t.word)}));const s=u((t=>{e.onSearchChange(t),Z({q:t})}),300);S((()=>{s(t())}));const n=e=>{a(e.target.value)},o=()=>"all"!==e.searchMode||e.caseSensitive||e.wholeWord,l=()=>{a(""),e.onSearchChange(""),Z({q:""})},d=()=>{e.onSearchModeChange("all"),e.onCaseSensitiveChange(!1),e.onWholeWordChange(!1),Z({mode:"all",case:!1,word:!1})},h=t=>{const r=["all","name","description"].includes(t)?t:"all";e.onSearchModeChange(r);const a=X();a.mode=r,Z(a)};return g=ee(),p=g.firstChild,f=p.firstChild,b=p.nextSibling.firstChild,w=b.firstChild,C=w.firstChild,M=w.nextSibling,L=M.firstChild,$=M.nextSibling.firstChild,P=b.nextSibling.firstChild,D=P.firstChild,j=P.nextSibling,I=j.firstChild,W=j.nextSibling,f.$$input=n,i(p,(m=x((()=>!!e.searchQuery)),()=>{return m()&&((e=te()).$$click=l,e);var e}),null),C.addEventListener("change",(()=>h("all"))),L.addEventListener("change",(()=>h("name"))),$.addEventListener("change",(()=>h("description"))),D.addEventListener("change",(t=>(t=>{e.onCaseSensitiveChange(t);const r=X();r.case=t,Z(r)})(t.target.checked))),I.addEventListener("change",(t=>(t=>{e.onWholeWordChange(t);const r=X();r.word=t,Z(r)})(t.target.checked))),W.$$click=d,v((t=>{var a=e.isLoading?"Loading...":"Search packages...",s=e.isLoading,n=!o(),i="ml-1 flex items-center justify-center h-5 w-5 rounded text-xs transition-colors "+(o()?"text-gray-500 hover:text-gray-700 hover:bg-gray-200 cursor-pointer":"text-gray-300 cursor-default");return a!==t.e&&c(f,"placeholder",t.e=a),s!==t.t&&(f.disabled=t.t=s),n!==t.a&&(W.disabled=t.a=n),i!==t.o&&r(W,t.o=i),t}),{e:void 0,t:void 0,a:void 0,o:void 0}),v((()=>f.value=t())),v((()=>C.checked="all"===e.searchMode)),v((()=>L.checked="name"===e.searchMode)),v((()=>$.checked="description"===e.searchMode)),v((()=>D.checked=e.caseSensitive)),v((()=>I.checked=e.wholeWord)),g;var m,g,p,f,b,w,C,M,L,$,P,D,j,I,W}a(["input","click"]);var ae=t('<div class="flex space-x-2">'),se=t("<button>");function ne(e){const t=[{id:30,label:"Last 30 Days"},{id:90,label:"Last 90 Days"},{id:365,label:"Last Year"}];return a=ae(),i(a,w(C,{each:t,children:({id:t,label:a})=>{return(s=se()).$$click=()=>e.setPeriod(t),i(s,a),v((()=>r(s,"px-4 py-2 rounded border text-sm font-medium transition-colors duration-200\n            "+(e.period===t?"bg-amber-600 text-white border-amber-600 hover:bg-amber-700":"bg-white text-stone-800 border-stone-200 hover:bg-stone-50")))),s;var s}})),a;var a}a(["click"]);var ie=t('<div class="sticky top-[72px] z-10 bg-white shadow-sm border-b border-gray-200"><div class="container mx-auto"><div class="flex md:flex-row justify-between items-center gap-4 p-3"><div class="flex items-end shrink-0">');function oe(e){const{searchQuery:t,setSearchQuery:r,searchMode:a,setSearchMode:s,caseSensitive:n,setCaseSensitive:o,wholeWord:l,setWholeWord:c,isLoading:d,period:h,setPeriod:u}=e;return m=ie(),g=m.firstChild.firstChild,p=g.firstChild,i(g,w(re,{get searchQuery(){return t()},onSearchChange:r,get searchMode(){return a()},onSearchModeChange:s,get caseSensitive(){return n()},onCaseSensitiveChange:o,get wholeWord(){return l()},onWholeWordChange:c,isLoading:d}),p),i(p,w(ne,{get period(){return h()},setPeriod:u})),m;var m,g,p}var le=t('<div class="flex flex-col justify-center items-center h-64 space-y-4"><div class="loading-spinner animate-spin rounded-full h-12 w-12 border-t-2 border-b-2"></div><div class=text-gray-500>Loading Homebrew data...');function ce(){return le()}var de=t("<span>");function he(e){const t=x((()=>{const t=e.text||"";if("all"!==e.searchMode&&e.searchMode!==e.context)return t;const r=((e,t)=>{if(!e)return[];const r=e.split(" ").filter((e=>e.length>0));return t?r:r.map((e=>e.toLowerCase()))})(e.query,e.caseSensitive);if(!r.length)return t;const a=e.caseSensitive?t:t.toLowerCase();let s=t,n=0;const i=(t,r,a)=>{if(!e.wholeWord)return!0;const s=0===r||!/\w/.test(t[r-1]),n=r+a===t.length||!/\w/.test(t[r+a]);return s&&n};return r.forEach((e=>{let t=0;for(;-1!==(t=a.indexOf(e,t));){if(!i(a,t,e.length)){t+=1;continue}const r=t+n,o=s.slice(0,r),l=s.slice(r,r+e.length),c=s.slice(r+e.length);s=`${o}<mark class="bg-yellow-200 dark:bg-yellow-700/50">${l}</mark>${c}`,n+=57,t+=e.length}})),s}));return r=de(),v((()=>r.innerHTML=t())),r;var r}var ue=t('<tr class="table-row cursor-pointer hover:bg-gray-50 dark:hover:bg-gray-800/50"><td class="w-14 p-3 text-left"></td><td class="w-8 p-3 text-center"></td><td class="w-48 p-3 text-left font-medium overflow-hidden"><div class=truncate></div></td><td class="p-3 text-left text-gray-600 truncate"><div></div></td><td class="w-24 2xl:w-40 p-3 text-center"></td><td class="w-16 p-3 text-right font-medium"title="Popularity Score"></td><td class="w-20 p-3 text-right"></td><td class="w-10 p-3 text-center"><button>'),me=t('<div title="Cask - GUI application or binary package distributed as macOS native installer">'),ge=t('<div title="Formula - Command-line software package managed by Homebrew">'),pe=t('<svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16">'),fe=t('<svg xmlns=http://www.w3.org/2000/svg class="h-5 w-5"fill=none viewBox="0 0 24 24"stroke=currentColor><path stroke-linecap=round stroke-linejoin=round stroke-width=2 d="M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z">');function be(e){const{item:t,index:a,searchQuery:n,searchMode:o,caseSensitive:l,wholeWord:u,onClick:g}=e,{addToCart:p,removeFromCart:f,isInCart:b}=s(),[S,C]=y(window.matchMedia("(min-width: 1536px)").matches);k((()=>{const e=window.matchMedia("(min-width: 1536px)"),t=e=>C(e.matches);e.addEventListener("change",t),C(e.matches),M((()=>{e.removeEventListener("change",t)}))}));const L=e=>{e.stopPropagation(),b(t)?f(t):p(t)},$=e=>e.name;return j=ue(),I=j.firstChild,W=I.nextSibling,q=W.nextSibling,A=q.firstChild,_=q.nextSibling,U=_.firstChild,E=_.nextSibling,O=E.nextSibling,T=O.nextSibling,B=T.nextSibling.firstChild,j.$$click=()=>g(t),i(I,a+1),i(W,(P=x((()=>"cask"===t.key.type)),()=>{return P()?(t=me(),i(t,w(h,{class:"w-5 h-5 text-purple-500 inline-block"})),t):(e=ge(),i(e,w(d,{class:"w-5 h-5 text-amber-500 inline-block"})),e);var e,t})),i(A,w(he,{get text(){return $(t)},get query(){return n()},context:"name",get searchMode(){return o()},get caseSensitive(){return l()},get wholeWord(){return u()}})),i(U,w(he,{get text(){return t.desc},get query(){return n()},context:"description",get searchMode(){return o()},get caseSensitive(){return l()},get wholeWord(){return u()}})),i(E,w(m,{get count(){return t.count},get trend(){return S()?t.trend:null}})),i(O,(()=>t.score)),i(T,(()=>t.displayCount.toLocaleString())),B.$$click=L,i(B,(D=x((()=>!!b(t))),()=>D()?pe():fe())),v((e=>{var a=$(t),s=t.desc,n="p-1 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 "+(b(t)?"text-red-500 hover:text-red-700 dark:text-red-400 dark:hover:text-red-600":"text-blue-500 hover:text-blue-700 dark:text-blue-400 dark:hover:text-blue-600"),i=b(t)?"Remove from cart":"Add to cart";return a!==e.e&&c(q,"title",e.e=a),s!==e.t&&c(_,"title",e.t=s),n!==e.a&&r(B,e.a=n),i!==e.o&&c(B,"title",e.o=i),e}),{e:void 0,t:void 0,a:void 0,o:void 0}),j;var P,D,j,I,W,q,A,_,U,E,O,T,B}a(["click"]);var ve=t('<img src=svg/components/sort-indicator.svg alt="Sort indicator">');function xe(e){return t=ve(),v((()=>r(t,e.class))),t;var t}var ye=t('<div class="flex flex-col md:flex-row items-center justify-between gap-4 py-4 px-2 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700"><div class="flex items-center space-x-2"><span class="text-sm text-gray-700 dark:text-gray-300">Show</span><select class="rounded border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-700 text-gray-700 dark:text-gray-200 text-sm p-1"><option value=100>100</option><option value=250>250</option><option value=500>500</option></select><span class="text-sm text-gray-700 dark:text-gray-300">per page</span></div><div class="flex items-center"><span class="text-sm text-gray-700 dark:text-gray-300 mr-2">Showing <span class=font-medium></span> to <span class=font-medium></span> of <span class=font-medium></span> items</span></div><div class="flex items-center space-x-1"><button class="px-2 py-1 rounded border text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed bg-white text-gray-700 border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700"aria-label="Previous page">←</button><div class="flex space-x-1"></div><button class="px-2 py-1 rounded border text-sm font-medium transition-colors duration-200 disabled:opacity-50 disabled:cursor-not-allowed bg-white text-gray-700 border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700"aria-label="Next page">→'),we=t('<span class="px-2 py-1">...'),ke=t("<button>");function Se(e){const t=()=>Math.max(1,e.itemsPerPage||100),a=()=>Math.max(0,e.totalItems||0),s=()=>Math.max(1,e.currentPage||1),n=x((()=>Math.max(1,Math.ceil(a()/t())))),o=x((()=>{const e=s(),t=n();if(t<=7)return Array.from({length:t},((e,t)=>t+1));const r=[1];e>3&&r.push("...");const a=Math.max(2,e-1),i=Math.min(t-1,e+1);for(let s=a;s<=i;s++)r.push(s);return e<t-2&&r.push("..."),t>1&&r.push(t),r})),l=()=>{const e=s(),r=t(),n=a();return Math.min((e-1)*r+1,n||1)},c=()=>{const e=s(),r=t(),n=a();return Math.min(e*r,n)},d=t=>{e.onPageChange(t),window.scrollTo(0,0)},h=t=>{const r=parseInt(t.target.value,10);e.onItemsPerPageChange(r)};return u=ye(),m=u.firstChild,g=m.firstChild.nextSibling,p=m.nextSibling,f=p.firstChild.firstChild.nextSibling,b=f.nextSibling.nextSibling,y=b.nextSibling.nextSibling,k=p.nextSibling.firstChild,S=k.nextSibling,M=S.nextSibling,g.addEventListener("change",h),i(f,l),i(b,c),i(y,a),k.$$click=()=>d(s()-1),i(S,w(C,{get each(){return o()},children:e=>{return"..."===e?we():((t=ke()).$$click=()=>d(e),i(t,e),v((()=>r(t,"px-3 py-1 rounded text-sm font-medium transition-colors duration-200\n                    "+(s()===e?"bg-amber-600 text-white border border-amber-600 hover:bg-amber-700":"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-200 dark:border-gray-600 dark:hover:bg-gray-700")))),t);var t}})),M.$$click=()=>d(s()+1),v((e=>{var t=s()<=1,r=s()>=n();return t!==e.e&&(k.disabled=e.e=t),r!==e.t&&(M.disabled=e.t=r),e}),{e:void 0,t:void 0}),v((()=>g.value=t())),u;var u,m,g,p,f,b,y,k,S,M}a(["click"]);var Ce=t('<div class="data-table h-[calc(100vh-12rem)] flex flex-col"><div class="sticky top-0 bg-white dark:bg-gray-900 z-10"><table class="w-full table-fixed"><thead class=table-header><tr class=table-header><th class="p-3 w-14 text-left border-b">#</th><th class="p-3 w-8 text-center border-b"></th><th class="p-3 w-48 text-left border-b">Name</th><th class="p-3 text-left border-b">Description</th><th class="p-3 w-24 2xl:w-40 text-center border-b cursor-pointer hover:bg-gray-100"><div class="flex items-center justify-center space-x-1"><span>Trend</span></div></th><th class="p-3 w-16 text-right border-b cursor-pointer hover:bg-gray-100"><div class="flex items-center justify-end space-x-1"><span>Score</span></div></th><th class="p-3 w-20 text-right border-b cursor-pointer hover:bg-gray-100"><div class="flex items-center justify-end space-x-1"><span>Installs</span></div></th><th class="p-3 w-14 text-center border-b">Cart</th></tr></thead></table></div><div class="flex-1 overflow-auto pt-1"> <table class="w-full table-fixed"><tbody>');function Me(e){const{packages:t,searchQuery:r,onPackageClick:a}=e,[s,n]=y("score"),[o,l]=y({field:"score",period:e.period}),[c,d]=y(1),[h,u]=y(100);k((()=>{try{const e=function(){try{const e=localStorage.getItem("brewTrendItemsPerPage");return e?parseInt(e,10):100}catch(e){return 100}}();u(e)}catch(e){}}));const[m]=L((()=>e.items),(e=>e||[])),g=x((()=>{const e=m()||[];return e.length?JSON.parse(JSON.stringify(e)):[]})),p=x((()=>{const e=g();if(!e.length)return[];return W.sortItems(e,{field:s()}).map(((e,t)=>({...e,sortedIndex:t})))})),f=x((()=>{const e=p();if(!e.length)return[];const t=(c()-1)*h(),r=t+h();return e.slice(t,r)}));S((()=>{e.searchQuery&&e.searchQuery(),e.period,d(1)})),S((()=>{const t=s(),r=e.period,a=o();t===a.field&&r===a.period||l({field:t,period:r})}));const b=e=>{s()===e||n(e)},v=e=>{d(e),setTimeout((()=>{const e=document.querySelector(".data-table .overflow-auto");e&&function(e,t=300){if(!e)return;const r=e.scrollTop,a=-r,s=performance.now();requestAnimationFrame((function n(i){const o=i-s;e.scrollTop=function(e,t,r,a){return(e/=a/2)<1?r/2*e*e+t:-r/2*(--e*(e-2)-1)+t}(o,r,a,t),o<t&&requestAnimationFrame(n)}))}(e)}),0)},M=e=>{const t=(c()-1)*h(),r=Math.floor(t/e)+1;$((()=>{u(e),d(r)}));try{!function(e){try{localStorage.setItem("brewTrendItemsPerPage",e.toString())}catch(t){}}(e)}catch(a){}},P=x((()=>p().length));return q=Ce(),A=q.firstChild,_=A.firstChild.firstChild.firstChild.firstChild.nextSibling.nextSibling.nextSibling.nextSibling,U=_.firstChild,E=U.firstChild,O=_.nextSibling,T=O.firstChild,B=T.firstChild,F=O.nextSibling,Q=F.firstChild,H=Q.firstChild,N=A.nextSibling.firstChild.nextSibling.firstChild,_.$$click=()=>b("trend"),i(U,(D=x((()=>"trend"===s())),()=>D()&&w(xe,{})),E),O.$$click=()=>b("score"),i(T,(j=x((()=>"score"===s())),()=>j()&&w(xe,{})),B),F.$$click=()=>b("installs"),i(Q,(I=x((()=>"installs"===s())),()=>I()&&w(xe,{})),H),i(N,w(C,{get each(){return f()},children:t=>w(be,{item:t,get index(){return t.sortedIndex},get searchQuery(){return e.searchQuery},get searchMode(){return e.searchMode},get caseSensitive(){return e.caseSensitive},get wholeWord(){return e.wholeWord},get onClick(){return e.onPackageClick}})})),i(q,w(Se,{get currentPage(){return c()},get itemsPerPage(){return h()},get totalItems(){return P()},onPageChange:v,onItemsPerPageChange:M}),null),q;var D,j,I,q,A,_,U,E,O,T,B,F,Q,H,N}a(["click"]);var Le=t('<div class="px-4 md:px-6 pt-4 text-sm text-gray-500"> results found for "<!>"');function $e(e){const{count:t,query:r}=e;return r?(a=Le(),s=a.firstChild,(n=s.nextSibling).nextSibling,i(a,t,s),i(a,r,n),a):null;var a,s,n}var Pe=t('<main class="flex-1 overflow-hidden"><div class="container mx-auto h-full"><div class=table-container>');function De(e){const{isLoading:t,filteredItems:r,searchQuery:a,searchMode:s,caseSensitive:n,wholeWord:o,onPackageClick:l}=e;return c=Pe(),d=c.firstChild,h=d.firstChild,i(d,w($e,{get count(){return r.length},get query(){return a()}}),h),i(h,t?w(ce,{}):w(Me,{items:r,searchQuery:a,searchMode:s,caseSensitive:n,wholeWord:o,onPackageClick:l})),c;var c,d,h}var je=t('<div class="fixed bottom-0 left-0 right-0 bg-gray-900 text-white p-4 text-sm font-mono overflow-auto max-h-[50vh]"><pre>');function Ie(e){return t=je(),r=t.firstChild,i(r,(()=>JSON.stringify(e.data,null,2))),t;var t,r}var We=t('<div class="flex flex-col h-screen">');function qe(){const[t,r]=y(30),[a,s]=y(""),[n,o]=y("all"),[l,c]=y(!1),[d,h]=y(!1),[u,m]=e([]),[b,v]=y(null),[C,M]=y(!1);k((async()=>{await j.initialize();const e=X();void 0!==e.q&&s(e.q),void 0!==e.mode&&o(e.mode),void 0!==e.case&&c(e.case),void 0!==e.word&&h(e.word),void 0!==e.period&&r(e.period)})),S((()=>{if(I.isLoading)return;const e=q.filterItems(I.items||[],a(),n(),l(),d(),t(),I.summary);m(e)}));const L=()=>{const e=t(),r=new Date(I.summary[e]?.date?.start),a=new Date(I.summary[e]?.date?.end);return`${r.toLocaleDateString()} - ${a.toLocaleDateString()}`},$=e=>{v(e),M(!0)},{isDebugMode:P,debugData:D}=function(e){const[t,r]=y(!1);return S((()=>{const e=new URLSearchParams(window.location.search).has("debug"),t=new URLSearchParams(window.location.search).has("inspect");r(e||t)})),{isDebugMode:t,debugData:e}}((()=>function({period:e,searchQuery:t,searchMode:r,caseSensitive:a,wholeWord:s,filteredItems:n,store:i}){return{period:e(),searchState:{query:t(),mode:r(),caseSensitive:a(),wholeWord:s()},filteredItemsCount:n.length,storeState:{isLoading:i.isLoading,summary:i.summary}}}({period:t,searchQuery:a,searchMode:n,caseSensitive:l,wholeWord:d,filteredItems:u,store:I})));return w(f,{get children(){var e,m=We();return i(m,w(K,{store:I,period:t,formatTimePeriod:L}),null),i(m,w(oe,{searchQuery:a,setSearchQuery:s,searchMode:n,setSearchMode:o,caseSensitive:l,setCaseSensitive:c,wholeWord:d,setWholeWord:h,get isLoading(){return I.isLoading},period:t,setPeriod:r}),null),i(m,w(De,{get isLoading(){return I.isLoading},filteredItems:u,searchQuery:a,searchMode:n,caseSensitive:l,wholeWord:d,onPackageClick:$}),null),i(m,w(g,{get isOpen(){return C()},get package(){return b()},onClose:()=>M(!1)}),null),i(m,w(p,{}),null),i(m,(e=x((()=>!!P())),()=>e()&&w(Ie,{get data(){return D()}})),null),m}})}b((()=>w(qe,{})),document.getElementById("root"));
